---
- name: Copy NTP configuration file
  copy:
    src: ntp.conf
    dest: /etc/ntp.conf
    backup: yes
  notify: restart ntpd

- name: Copy DHCP Relay configuration file
  copy:
    src: isc-dhcp-relay
    dest: /etc/default/isc-dhcp-relay
    backup: yes
  notify: restart dhcrelay

- name: Copy FRR daemons file
  copy:
    src: daemons
    dest: /etc/frr/daemons
    backup: yes
  notify: restart frr

- name: Copy FRR configuration
  template:
    src: frr.j2
    dest: /etc/frr/frr.conf
    backup: yes
  notify: reload frr

- name: Initial Management VRF setup
  nclu:
    commit: true
    description: "Initial Management VRF setup"
    commands:
      - add interface eth0 vrf mgmt
      - add hostname "{{ inventory_hostname }}"

- name: Front-Facing Port Configuration
  nclu:
    commit: true
    description: "Front-Facing Port Configuration"
    commands:
      - add interface swp1-29

- name: VLAN Configuration
  nclu:
    commit: true
    description: "Front-Facing Port Configuration"
    commands:
      - add vlan 100,200,300,500

- name: Copy Hostapd / 802.1x configuration
  copy:
    src: hostapd.conf
    dest: /etc/hostapd.conf
    backup: yes
  notify: restart hostapd
